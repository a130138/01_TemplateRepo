# File Transformation POC

trigger:
- none

pool:
  vmImage: windows-latest

variables:
  - name: owner
    value:  'jc'
  - name: env
    value: 'POC'
  - name:  contentpath
    value:  '$(System.DefaultWorkingDirectory)\05_FileTransform\azuredeploy.json'

steps:
- task: PowerShell@2
  inputs:
      targetType: inline
      script: |
        (Get-Content -Path "$contentpath") | foreach($_.replace($owner,$env)) | Set-Content -Path "$contentpath"

#- task: FileTransform@1
#  displayName: "File Transform Task"
#  inputs:
#    folderPath:  '$(System.DefaultWorkingDirectory)/05_FileTransform/'
#    targetFiles: 'azuredeploy.json'
#    fileType: 'json'