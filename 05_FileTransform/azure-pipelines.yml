# File Transformation POC

trigger:
- none

pool:
  vmImage: windows-latest

variables:
  - name: AzTagOwner
    value:  'jc'
  - name:  contentpath
    value:  '$(System.DefaultWorkingDirectory)\05_FileTransform\azuredeploy.json'

steps:
- task: PowerShell@2
  inputs:
      targetType:  inline
      script:
          echo $(AzTagOwner)
          echo $AzTagOwner

- task: PowerShell@2
  inputs:
      targetType: inline
      script: |
        (Get-Content -Path "$(contentpath)") | foreach($_.replace('$AzTagOwner',jc)) | Set-Content -Path "$contentpath"

#- task: FileTransform@1
#  displayName: "File Transform Task"
#  inputs:
#    folderPath:  '$(System.DefaultWorkingDirectory)/05_FileTransform/'
#    targetFiles: 'azuredeploy.json'
#    fileType: 'json'